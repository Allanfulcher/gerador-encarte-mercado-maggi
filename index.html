<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gerador de Encarte Oferta</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Fredoka One', cursive;
      margin: 0;
      padding: 0;
      background: white;
    }
    @page {
      size: A4;
      margin: 0;
    }
    @media print {
      body, html {
        width: 210mm;
        height: 297mm;
        margin: 0;
        padding: 0;
        overflow: visible;
        background: white;
      }
      #form-page {
        display: none;
      }
      #encarte-page {
        display: block;
        width: 210mm;
        height: 297mm;
        box-sizing: border-box;
        margin: 0;
        border: none !important;
        background-color: #facc15 !important; /* full yellow background */
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
  </style>
</head>
<body class="bg-white min-h-screen flex items-center justify-center p-4">
  <div id="form-page" class="w-full max-w-md flex flex-col items-center">
    <h1 class="text-3xl font-extrabold mb-6 text-center text-red-600">Gerador de Encarte Oferta</h1>
    <img
      src="maggi-logo.png"
      alt="Logomarca da empresa, imagem colorida com fundo transparente"
      class="h-28 w-auto mb-6 object-contain"
    />
    <form id="offerForm" class="bg-yellow-400 p-6 rounded shadow-md border border-black w-full">
      <label for="produto" class="block font-black mb-1 text-black text-lg">Produto</label>
      <input
        type="text"
        id="produto"
        name="produto"
        required
        class="w-full mb-4 px-3 py-2 border border-black rounded text-black font-bold text-xl"
        placeholder="Nome do produto"
      />

      <label for="preco" class="block font-black mb-1 text-black text-lg">Pre√ßo (R$)</label>
      <input
        type="number"
        id="preco"
        name="preco"
        step="0.01"
        min="0"
        required
        class="w-full mb-4 px-3 py-2 border border-black rounded text-black font-bold text-xl"
        placeholder="00,00"
      />

      <div class="mb-6">
        <label for="unidade" class="block font-black mb-1 text-black text-lg">Unidade</label>
        <select
          id="unidade"
          name="unidade"
          required
          class="w-full px-3 py-2 border border-black rounded text-black font-bold text-xl bg-white"
        >
          <option value="" disabled selected>Selecione</option>
          <option value="un">un</option>
          <option value="dz">dz</option>
          <option value="cx">cx</option>
          <option value="kg">kg</option>
          <option value="lt">lt</option>
          <option value="pc">pc</option>
        </select>
      </div>

      <label for="validade" class="block font-black mb-1 text-black text-lg">Validade da Oferta</label>
      <input
        type="date"
        id="validade"
        name="validade"
        required
        class="w-full mb-6 px-3 py-2 border border-black rounded text-black font-bold text-xl"
      />

      <button
        type="submit"
        class="w-full bg-red-600 text-white font-extrabold text-2xl py-3 rounded hover:bg-red-700 transition"
      >
        Gerar Encarte
      </button>
    </form>
    <p class="mt-6 text-center text-black font-bold text-sm select-none">criado por CNV Consultoria e Marketing</p>
  </div>

  <div
    id="encarte-page"
    class="hidden w-[210mm] h-[297mm] mx-auto flex flex-col"
    style="box-sizing: border-box; background-color: #facc15;"
  >
    <div class="bg-red-600 text-white font-extrabold text-[112px] text-center py-12 leading-none flex-shrink-0">
      OFERTA
    </div>
    <div class="flex-grow flex flex-col items-center justify-start pt-20 pb-16 px-16 relative text-black text-center">
      <svg
        class="absolute top-0 left-0 right-0 mx-auto -translate-y-14 pointer-events-none"
        width="210mm"
        height="40"
        viewBox="0 0 595 85"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <polygon points="0,85 297.5,0 595,85" fill="#facc15" />
      </svg>
      <div class="relative z-10 flex flex-col items-center w-full max-w-[520px] mx-auto">
        <div id="encarte-produto" class="text-[80px] font-black mb-20 break-words"></div>
        <div class="flex justify-center items-baseline gap-12 font-black text-[144px] leading-none w-full">
          <span class="text-[56px] -translate-y-8">R$</span>
          <span id="encarte-preco" class="text-red-600 break-words"></span>
        </div>
        <div class="flex justify-between text-[48px] font-black mt-20 w-full px-16">
          <span> </span>
          <span id="encarte-qtd" class="break-words"></span>
        </div>
        <div class="relative w-full max-w-[520px] mt-40 flex justify-end items-end gap-4">
          <img
            src="maggi-logo.png"
            alt="Logomarca da empresa, imagem colorida com fundo transparente"
            class="h-24 w-auto object-contain"
          />
          <div id="encarte-validade" class="text-[28px] font-black break-words self-end"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('offerForm');
    const encartePage = document.getElementById('encarte-page');
    const formPage = document.getElementById('form-page');

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const produto = form.produto.value.trim().toUpperCase();
      let preco = parseFloat(form.preco.value).toFixed(2).replace('.', ',');
      const unidade = form.unidade.value.trim();
      const validadeRaw = form.validade.value;

      if (!produto || !preco || !unidade || !validadeRaw) return;

      // Format date to dd/mm/yyyy
      const dateObj = new Date(validadeRaw + 'T00:00:00');
      const day = String(dateObj.getDate()).padStart(2, '0');
      const month = String(dateObj.getMonth() + 1).padStart(2, '0');
      const year = dateObj.getFullYear();
      const validadeFormatted = `VALIDADE OFERTA: ${day}/${month}/${year}`;

      document.getElementById('encarte-produto').textContent = produto;
      document.getElementById('encarte-preco').textContent = preco;
      document.getElementById('encarte-qtd').textContent = unidade;
      document.getElementById('encarte-validade').textContent = validadeFormatted;

      formPage.classList.add('hidden');
      encartePage.classList.remove('hidden');

      // Scroll to top for print preview
      window.scrollTo(0, 0);
    });
  </script>
</body>
</html>